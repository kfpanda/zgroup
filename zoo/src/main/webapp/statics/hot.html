<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8" />
<meta name="viewport"
	content="width=device-width,initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no" />
<meta name="format-detection" content="telephone=no" />
<title>最热</title>
<link rel="stylesheet" href="css/normalize.css" />
<link rel="stylesheet" href="css/comm.css" />
<link rel="stylesheet" href="css/article.css" />
<link rel="stylesheet" href="css/header.css" />
</head>

<body>
	<header>
		<div class="title">
			<label>最热</label> <span>HOT</span>
		</div>
	</header>

	<article>
		<div class="contain">
			<div class="row"></div>
	</article>
	<script src="/zoo/statics/js/jquery-1.11.3.min.js"
		type="text/javascript" charset="utf-8"></script>
	<script src="/zoo/statics/js/common.js" type="text/javascript"
		charset="utf-8"></script>

	<script type="text/javascript">
		var lastTime = 0;
		var curPage = 0;
		var PATH = "/zoo"
		function loadTV() {
			alert(AJAX_SUCC)
			if (new Date().getTime() - lastTime > 500) {
				lastTime = new Date().getTime();
				curPage++;

				$.getJSON(
								PATH + "/videoNew/list.json",
								{
									curPage : curPage,
									pageSize : 10
								},
								function(result) {
									if (result.r == AJAX_SUCC) {
										for (var i = 0; i < result.data.length; i++) {
											var data = result.data[i];
											$(".row").append(
													'<div class="v_block"><div class="img"><a href='+ data.url+'><img src='+data.img+' ></a></div>' 
													+ '<div class="msg"><div class="left"><div class="top">' 
													+ '<span class="hoster">'+data.zbname+'</span></div>' 
													+ '<div class="bottom"><a href="javascript:void(0);" class="title">'+data.vname+'</a></div></div>' 
													+ '<div class="right"><div class="top"><span class="audience"> '+data.viewnum+'</span></div>' 
													+ '<div class="bottom"><a href="javascript:void(0);" class="like"> 收藏</a></div></div></div></div>'
													);
										}
									}
								});
			}
		}

		var scrollDom = document.body;//document.getElementsByClassName("page")[0];
		var scrollDom1 = document.getElementsByClassName("page")[0];
		scrollDom.onscroll = function() {

			var h = document.body.clientHeight; //椤甸潰楂樺害
			var c = ScollPostion().top; //婊氬姩鏉op
			var wh = $(window).height(); //椤甸潰鍙槸鍖哄煙楂樺害
			var s = h - (c + wh);
			console.log(s / h);
			if (s / h == 0) {
				loadTV(); // 璇曡瘯
			}
		};
		$(document).ready(function() {
			loadTV();
		});
		function ScollPostion() {//婊氬姩鏉′綅缃�
			var t, l, w, h;
			if (document.documentElement && document.documentElement.scrollTop) {
				t = document.documentElement.scrollTop;
				l = document.documentElement.scrollLeft;
				w = document.documentElement.scrollWidth;
				h = document.documentElement.scrollHeight;
			} else if (document.body) {
				t = document.body.scrollTop;
				l = document.body.scrollLeft;
				w = document.body.scrollWidth;
				h = document.body.scrollHeight;
			}
			return {
				top : t,
				left : l,
				width : w,
				height : h
			};
		}
	</script>
</body>

</html>